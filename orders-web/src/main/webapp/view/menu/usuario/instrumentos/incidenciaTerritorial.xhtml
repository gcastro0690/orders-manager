<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:o="http://omnifaces.org/ui" xmlns:sec="http://www.springframework.org/security/tags">



<ui:composition>
	<h:form id="incidenciaTerritorial">
		<div class="ui-g-6">
			<div class="ui-g-12 ui-md-6 ui-lg-6" style="width: auto;">#{msg.aprobacionPrevia_txt_nroOficio}</div>
			<div class="ui-g-12 ui-md-6 ui-lg-6">
				<p:inputText placeholder="#{msg.aprobacionPrevia_txt_nroOficio}" value="#{incidenciaTerritorial.nroOficio}"
					autocomplete="off" disabled="#{not incidenciaTerritorial.habilitado}" />

			</div>
		</div>
		<div style="clear: both"></div>

		<div style="width: 100%">

			<div class="ui-g-12 ui-md-12 ui-lg-12">
				<p:dataTable var="instrumentoArchivo" value="#{incidenciaTerritorial.archivos}"
					currentPageReportTemplate="{currentPage} #{msg.de} {totalPages}" paginatorPosition="bottom"
					sortBy="#{instrumentoArchivo.modificado}" sortOrder="DESCENDING" id="instrumentoArchivosIncidencia" class="tabla"
					emptyMessage="" rows="10" paginator="true" reflow="true" editable="true" editMode="cell" rowIndexVar="rowIndex"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

					<p:ajax event="cellEdit" />
					<p:column headerText="#{msg.aprobacionPrevia_tabla_header_fecha}">
						<h:outputText value="#{instrumentoArchivo.modificado}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.aprobacionPrevia_tabla_header_nombre}">
						<h:outputText value="#{instrumentoArchivo.nombre}" />
					</p:column>
					<p:column headerText="#{msg.aprobacionPrevia_tabla_header_descripcion}">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{instrumentoArchivo.descripcion}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{instrumentoArchivo.descripcion}" autocomplete="off" style="width:96%" />
							</f:facet>
						</p:cellEditor>

						<h:outputText value="#{instrumentoArchivo.descripcion}" rendered="#{not incidenciaTerritorial.habilitado}" />

					</p:column>

					<p:column headerText="#{msg.aprobacionPrevia_tabla_header_ver}">
					<ui:include src="/view/template/downloadTemplate.xhtml">
							<ui:param name="form" value="#{false}" />
							<ui:param name="styleClass" value="downloadButtonTable" />
							<ui:param name="file" value="#{instrumentoArchivo}" />
						</ui:include>
					</p:column>

					<p:column headerText="#{msg.aprobacionPrevia_tabla_header_eliminar}" rendered="#{incidenciaTerritorial.habilitado}">
						<p:commandButton id="btneliminararchivoIT" icon="fa fa-trash-o"
							actionListener="#{incidenciaTerritorial.eliminarInstrumentoArchivo(instrumentoArchivo)}"
							oncomplete="document.getElementsByClassName('tooltipeliminarIT#{rowIndex}')[0].style='display:none'"
							update="instrumentoArchivosIncidencia" disabled="#{not incidenciaTerritorial.habilitado}" />
						<p:tooltip id="tooltipeliminarIT#{rowIndex}" widgetVar="tooltipeliminarIT#{rowIndex}" for="btneliminararchivoIT"
							value="#{msg.btn_eliminar}" position="left"  styleClass="tooltipeliminarIT#{rowIndex}" />
					</p:column>
				</p:dataTable>
				<div class="ui-g-12 ui-lg-12 ui-md-12" style="width: auto; float: right; padding-right: 0px;">
					<p:fileUpload fileUploadListener="#{incidenciaTerritorial.handleFileUpload}" mode="advanced"
						dragDropSupport="false" multiple="false" auto="true" update="instrumentoArchivosIncidencia"
						label="#{msg.btn_subir}" rendered="#{incidenciaTerritorial.habilitado}" />
				</div>
				<div class="ui-g-12 ui-lg-12 ui-md-12" style="padding-right: 0px;">
					<p:commandButton styleClass="boton-redondeado-verde" value="#{msg.incidenciaTerritorial_btn_notificar}"
						actionListener="#{incidenciaTerritorial.notificar()}" style="font-size: 12pt; float: right;"
						rendered="#{incidenciaTerritorial.habilitado}" />
				</div>
			</div>

		</div>


	</h:form>
</ui:composition>


</html>