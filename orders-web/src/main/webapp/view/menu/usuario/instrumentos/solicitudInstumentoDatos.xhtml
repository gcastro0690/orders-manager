<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<ui:composition>
    <h:form id="solicitudInstrumentoDatos">
        <div class="ui-lg-12">
            <div class="ui-g-4 ui-md-4 ui-lg-4">
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3 etiquetaform">#{msg.solicitud_datos_fecha_sol}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        <p:inputText disabled="true"
                                     value="#{solicitudInstrumentoDatos.solicitud.fechaSolicitud.time}">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                        </p:inputText>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3  etiquetaform">#{msg.solicitud_datos_nro_gex}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        <p:inputText id="gex" value="#{solicitudInstrumentoDatos.solicitud.gex}"
                                     disabled="#{not solicitudInstrumentoDatos.habilitadoGuardar}"
                                     autocomplete="off"
                                     maxlength="255">
                        </p:inputText>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3  etiquetaform">#{msg.solicitud_datos_nro_oficio}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        <p:inputText value="#{solicitudInstrumentoDatos.solicitud.oficio}"
                                     disabled="true"/>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3  etiquetaform">#{msg.solicitud_datos_org_label}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        <p:inputText
                                value="#{solicitudInstrumentoDatos.solicitud.nombreOrganismo}"
                                disabled="true"/>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3  etiquetaform" >#{msg.solicitud_datos_gex_inst_label}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        <p:inputText
                                value="#{solicitudInstrumentoDatos.solicitud.GEXInstrumento}"
                                disabled="true"/>
                    </div>
                </div>
            </div>
            <div class="ui-g-4 ui-md-4 ui-lg-4">
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3 etiquetaform">#{msg.solicitud_datos_inicio_plazo}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        <p:inputText disabled="true"
                                     value="#{solicitudInstrumentoDatos.solicitud.inicioPlazo.time}">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                        </p:inputText>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3  etiquetaform">#{msg.solicitud_datos_fecha_fin}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        <p:inputText
                                rendered="#{not solicitudInstrumentoDatos.habilitadoSubirResolucion}"
                                disabled="true"
                                value="#{solicitudInstrumentoDatos.solicitud.fechaFin.time}">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                        </p:inputText>

                        <p:calendar locale="es" readonlyInput="true"
                                    rendered="#{solicitudInstrumentoDatos.habilitadoSubirResolucion}"
                                    value="#{solicitudInstrumentoDatos.fechaFin}" showOn="button" mindate="#{solicitudInstrumentoDatos.hoy()}"/>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3 etiquetaform">#{msg.solicitud_datos_oficio}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        #{solicitudInstrumentoDatos.solicitud.oficioArchivo.nombreArchivo}
                        <ui:include src="/view/template/downloadTemplate.xhtml">
                            <ui:param name="form" value="#{false}"/>
                            <ui:param name="styleClass" value="downloadButtonTable"/>
                            <ui:param name="file"
                                      value="#{solicitudInstrumentoDatos.solicitud.oficioArchivo}"/>
                            <ui:param name="id" value="descOficio"/>
                        </ui:include>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                        <div class="ui-g-3 ui-md-3 ui-lg-3 etiquetaform">#{msg.solicitud_datos_estado}</div>
                        <div class="ui-g-9 ui-md-9 ui-lg-9">
                            <p:inputText value="#{solicitudInstrumentoDatos.solicitud.estado.name}"
                                         disabled="true"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ui-g-4 ui-md-4 ui-lg-4">
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <div class="ui-g-3 ui-md-3 ui-lg-3 etiquetaform">#{msg.solicitud_datos_fin_plazo}</div>
                    <div class="ui-g-9 ui-md-9 ui-lg-9">
                        <p:inputText disabled="true"
                                     value="#{solicitudInstrumentoDatos.solicitud.finPlazo.time}">
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                        </p:inputText>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-12" style="padding: 0">
                    <h:panelGroup id="tableRenderPanel"
                                  rendered="#{solicitudInstrumentoDatos.solicitud.resolucion !=null}">
                        <div class="ui-g-3 ui-md-3 ui-lg-3 etiquetaform">#{msg.solicitud_datos_resolucion}</div>
                        <div class="ui-g-9 ui-md-9 ui-lg-9">
                            #{solicitudInstrumentoDatos.solicitud.resolucion.nombreArchivo}
                            <ui:include src="/view/template/downloadTemplate.xhtml">
                                <ui:param name="form" value="#{false}"/>
                                <ui:param name="styleClass" value="downloadButtonTable"/>
                                <ui:param name="file"
                                          value="#{solicitudInstrumentoDatos.solicitud.resolucion}"/>
                                <ui:param name="id" value="descManifiesto"/>
                            </ui:include>
                        </div>
                    </h:panelGroup>
                </div>
            </div>
        </div>
        <div class="ui-g-12 ui-md-12 ui-lg-12">
            <p:commandButton value="#{msg.solicitud_datos_btn_dar_vista}"
                             styleClass="boton-redondeado-verde"
                             style="font-size: 12pt;"
                             rendered="#{solicitudInstrumentoDatos.puedeDarVista}"
                             onclick="PF('solicitudesTabs').select(2)"
                             disabled="#{not solicitudInstrumentoDatos.habilitadoDarVista}"/>

            <p:commandButton value="#{msg.solicitud_datos_btn_guardar}"
                             styleClass="boton-redondeado-verde"
                             style="font-size: 12pt;"
                             actionListener="#{solicitudInstrumentoDatos.guardarSolicitud}"
                             rendered="#{solicitudInstrumentoDatos.esMesa}"
                             disabled="#{not solicitudInstrumentoDatos.habilitadoGuardar}"/>

            <p:commandButton value="#{msg.solicitud_datos_btn_archivar}"
                             styleClass="boton-redondeado-verde"
                             style="font-size: 12pt;"
                             actionListener="#{solicitudInstrumentoDatos.archivarSolicitud}"
                             rendered="#{solicitudInstrumentoDatos.puedeArchivar}"
                             disabled="#{not solicitudInstrumentoDatos.habilitadoArchivar}"/>

            <p:commandButton value="#{msg.solicitud_datos_btn_subir_resolucion}" 
                             styleClass="boton-redondeado-verde" actionListener="#{solicitudInstrumentoDatos.validateFechaFin}"
                             style="font-size: 12pt;" rendered="#{solicitudInstrumentoDatos.esMesa}"
                             disabled="#{not solicitudInstrumentoDatos.habilitadoSubirResolucion}"/>
        </div>
    </h:form>


    <p:dialog header="#{msg.solicitud_dialog_subir_archivo}" widgetVar="dlgSubirResolucion"
              modal="true" resizable="false"
              closable="false" closeOnEscape="true" width="400px" draggable="false">
        <h:form id="formSubirResolucion">
            <h:panelGrid columns="2" cellpadding="5">
                <p:fileUpload fileUploadListener="#{solicitudInstrumentoDatos.handleFileResolucion}"
                              mode="advanced"
                              dragDropSupport="false" multiple="false" auto="true"
                              label="#{msg.btn_subir}"/>

                <f:facet name="footer">
                    <p:commandButton value="#{msg.btn_aceptar_mayus}"
                                     styleClass="boton-redondeado-verde" style="font-size: 12pt;"
                                     oncomplete="PF('dlgSubirResolucion').hide();"
                                     actionListener="#{solicitudInstrumentoDatos.saveFileUploadResolucion}"
                                     update=":tabs"/>

                    <p:commandButton value="#{msg.btn_volver}" styleClass="boton-redondeado-verde"
                                     style="font-size: 12pt;"
                                     oncomplete="PF('dlgSubirResolucion').hide();"
                                     actionListener="#{solicitudInstrumentoDatos.cancelFileUpload}"
                                     update=":tabs"/>
                </f:facet>
            </h:panelGrid>
        </h:form>
    </p:dialog>
</ui:composition>
</html>
